

@{
    ViewBag.Title = "Home Page";
}
<style>
    .ui-autocomplete-category {
        font-weight: bold;
        padding: .2em .4em;
        margin: .8em 0 .2em;
        background-color: #eeeeee;
        line-height: 1.5;
    }
</style>
<header class="business-header">
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <h1 class="tagline text-center">One Stop Place for law advice and consulting</h1>
                <div class="row">
                    <div class="col-md-6 col-md-offset-2">
                        <input id="project" class="form-control input-lg" placeholder="Select Service or Type Lawyer Name">
                        <input id="projectVal" type="hidden"/>
                        <input id="categ" type="hidden" />
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-warning btn-lg" id="searchLawyer">Search</button>
                    </div>
                </div>



                @*<div class="col-md-8" id="popularSearch">
                        <span class="tag">Popular: </span><span>Delhi</span>
                    </div>*@

                <video autoplay id="bgvid">
                    <source src="http://d2w4gictyunaqp.cloudfront.net/vid/home-hero.webm" type="video/webm">
                    <source src="http://d2w4gictyunaqp.cloudfront.net/vid/home-hero.mp4" type="video/mp4">
                </video>
            </div>
        </div>

    </div>

</header>


<div class="row">




</div>
        <script type="text/javascript">
            $(document).ready(function () {

                var selectItem = function (event, ui) {
                    $("#projectVal").val(ui.item.value);
                    $("#project").val(ui.item.label);
                    $("#categ").val(ui.item.category);

                    if ($("#categ").val() == "Lawyers") {
                        window.location.href = "/Profile/MemberProfile/" + ui.item.username;
                    }
                    else {
                        $.ajax({
                            url: '@Url.Action("SetSearchLawyersParam", "Lawyers")',
                            type: 'POST',
                            data: {
                                "LawServiceList": $("#projectVal").val(),
                                "CityList": localStorage.getItem("MenuCityId")
                            },
                            success: function (data) {
                                var url = '@Url.Action("SearchLawyers", "Lawyers")';
                                window.location.href = url;
                            }
                        });
                    }
                    return false;
                }

                $.widget("custom.catcomplete", $.ui.autocomplete, {
                    _create: function () {
                        this._super();
                        this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
                    },
                    _renderMenu: function (ul, items) {
                        var that = this,
                          currentCategory = "";
                        $.each(items, function (index, item) {
                            var li;
                            if (item.category != currentCategory) {
                                ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                                currentCategory = item.category;
                            }
                            li = that._renderItemData(ul, item);
                            if (item.category) {
                                li.attr("aria-label", item.category + " : " + item.Name);
                            }
                        });
                    }
                });

                $("#project").catcomplete({
                    source: function (request, response) {
                        $.ajax({
                            url: "/Home/GetServices",
                            type: "POST",
                            dataType: "json",
                            data: { term: request.term },
                            success: function (data) {
                                response($.map(data, function (item) {
                                    return { label: item.Name, value: item.Id, username: item.UserName, category: item.category };
                                }).slice(0, 5))
                            }
                        })
                    },
                    minLength: 0,
                    max: 5,
                    select: selectItem,
                    autoFocus: true
                }).bind('focus', function () { $(this).catcomplete("search", " "); });;
            });
        </script>
