

@{
    ViewBag.Title = "Home Page";
}
<div id="wrapper">
    <div class="banner_main">
        <div class="search_banner">
            <div class="container">
                <div class="search_main_bn">
                    <div class="search_main">
                        <div class="col-md-12">
                            <div class="col-md-10">
                                <input id="project" class="form-control input-lg" placeholder="Select Service or Type Lawyer Name">
                                <input id="projectVal" type="hidden" />
                                <input id="categ" type="hidden" />
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-warning btn-lg" id="searchLawyer">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="searvices_main">
        <div class="container">
            <div class="heading_01">
                <h2>SERVICES</h2>
            </div>
            <div class="services_inn">
                <div class="col-md-4 col-sm-4">
                    <h3>SEARCH LAWYER</h3>
                    <img src="~/images/search_lawyer.png">
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                    <a href="#" class="know_more_service">KNOW MORE <span>></span></a>
                </div>
                <div class="col-md-4 col-sm-4">
                    <h3>GET LEGAL CONSULTING</h3>
                    <img src="~/images/legal_consulting.png">
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                    <a href="#" class="know_more_service">KNOW MORE <span>></span></a>
                </div>
                <div class="col-md-4 col-sm-4">
                    <h3>LEGAL DOCUMENTATION</h3>
                    <img src="~/images/legal_documentation.png">
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                    <a href="#" class="know_more_service">KNOW MORE <span>></span></a>
                </div>
            </div>
        </div>
    </div>
    <div class="top_lawyer_main">
        <div class="container">
            <div class="heading_02">
                <h2>OUR TOP LAWYERS</h2>
            </div>
            <div class="top_lawyer_in">
                @foreach (var lawyer in ViewBag.topLawyers)
                {
                    <div class="col-md-3 col-sm-3 col-xs-3">
                        @if (lawyer.ImageUrl != null)
                        {
                        <img class="img-rounded" src="@lawyer.ImageUrl" height="150" width="150" />
                        }
                        else
                        {
                        <img class="img-rounded" src="~/images/avatar_default.png" height="150" width="150" />
                        }
                        <h4>@lawyer.Name</h4>
                        <p id="lawyerBio">@lawyer.Bio</p>
                    </div>
                }
            </div>
        </div>
    </div>
    @*<div class="blog_main">
        <div class="container">
            <div class="heading_01">
                <h2>LATEST BLOG</h2>
            </div>
            <div class="blog_inn">
                <div class="col-md-3 col-sm-3 col-xs-3">
                    <div class="blog_in_main">
                        <div class="blog_img"><img src="images/blog_01.jpg"></div>
                        <div class="year_main">
                            <div class="left_year">
                                <h5>Jun 2015</h5>
                            </div>
                            <div class="right_year">
                                <span>4 Comment</span>
                            </div>
                            <div class="blog_in_head">
                                <h4>Heading here</h4>
                            </div>
                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                            <div class="posted_main">POSTED IN <span>TEST CATEGORY </span><span>,</span><span>TEST CATEGORY</span></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-3 col-xs-3">
                    <div class="blog_in_main">
                        <div class="blog_img"><img src="images/blog_02.jpg"></div>
                        <div class="year_main">
                            <div class="left_year">
                                <h5>Jun 2015</h5>
                            </div>
                            <div class="right_year">
                                <span>4 Comment</span>
                            </div>
                            <div class="blog_in_head">
                                <h4>Heading here</h4>
                            </div>
                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                            <div class="posted_main">POSTED IN <span>TEST CATEGORY </span><span>,</span><span>TEST CATEGORY</span></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-3 col-xs-3">
                    <div class="blog_in_main">
                        <div class="blog_img"><img src="images/blog_01.jpg"></div>
                        <div class="year_main">
                            <div class="left_year">
                                <h5>Jun 2015</h5>
                            </div>
                            <div class="right_year">
                                <span>4 Comment</span>
                            </div>
                            <div class="blog_in_head">
                                <h4>Heading here</h4>
                            </div>
                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                            <div class="posted_main">POSTED IN <span>TEST CATEGORY </span><span>,</span><span>TEST CATEGORY</span></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-3 col-xs-3">
                    <div class="blog_in_main">
                        <div class="blog_img"><img src="images/blog_02.jpg"></div>
                        <div class="year_main">
                            <div class="left_year">
                                <h5>Jun 2015</h5>
                            </div>
                            <div class="right_year">
                                <span>4 Comment</span>
                            </div>
                            <div class="blog_in_head">
                                <h4>Heading here</h4>
                            </div>
                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has</p>
                            <div class="posted_main">POSTED IN <span>TEST CATEGORY </span><span>,</span><span>TEST CATEGORY</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="pricing_main">
        <div class="container">
            <div class="heading_02">
                <h2>PRICING</h2>
            </div>
            <div class="pricing_inn_main">
                <div class="col-md-4 col-sm-4">
                    <div class="pricing_inn">
                        <h2>1 Question</h2>
                        <div class="price">5<sup>$</sup></div>
                        <p>Lorem Ipsum is simply dummy text o the printing and typesetting industry. Lorem Ipsum has</p>
                        <div class="price_button"><a href="#">SIGN UP</a></div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="pricing_inn">
                        <h2>5 Question</h2>
                        <div class="price">20<sup>$</sup></div>
                        <p>Lorem Ipsum is simply dummy text o the printing and typesetting industry. Lorem Ipsum has</p>
                        <div class="price_button"><a href="#">SIGN UP</a></div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="pricing_inn">
                        <h2>10 Question</h2>
                        <div class="price">40<sup>$</sup></div>
                        <p>Lorem Ipsum is simply dummy text o the printing and typesetting industry. Lorem Ipsum has</p>
                        <div class="price_button"><a href="#">SIGN UP</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@
</div>
<script type="text/javascript">
    $(document).ready(function () {

        var divs = document.getElementById("lawyerBio");
        console.log(divs);
            if(divs.innerHTML.length > 100)
                divs.innerHTML = divs.innerHTML.substring(0, 100) + " - read more...";
        

        var selectItem = function (event, ui) {
            $("#projectVal").val(ui.item.value);
            $("#project").val(ui.item.label);
            $("#categ").val(ui.item.category);

            if ($("#categ").val() == "Lawyers") {
                window.location.href = "/Profile/MemberProfile/" + ui.item.username;
            }
            else {
                $.ajax({
                    url: '@Url.Action("SetSearchLawyersParam", "Lawyers")',
                    type: 'POST',
                    data: {
                        "LawServiceList": $("#projectVal").val(),
                        "CityList": localStorage.getItem("MenuCityId")
                    },
                    success: function (data) {
                        var url = '@Url.Action("SearchLawyers", "Lawyers")';
                        window.location.href = url;
                    }
                });
            }
            return false;
        }

        $.widget("custom.catcomplete", $.ui.autocomplete, {
            _create: function () {
                this._super();
                this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
            },
            _renderMenu: function (ul, items) {
                var that = this,
                  currentCategory = "";
                $.each(items, function (index, item) {
                    var li;
                    if (item.category != currentCategory) {
                        ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                        currentCategory = item.category;
                    }
                    li = that._renderItemData(ul, item);
                    if (item.category) {
                        li.attr("aria-label", item.category + " : " + item.Name);
                    }
                });
            }
        });

        $("#project").catcomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/GetServices",
                    type: "POST",
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        console.log(data);
                        response($.map(data, function (item) {
                            return { label: item.Name, value: item.Id, username: item.UserName, category: item.category };
                        }).slice(0, 5))
                    }
                })
            },
            minLength: 0,
            max: 5,
            select: selectItem,
            autoFocus: true
        }).bind('focus', function () { $(this).catcomplete("search", " "); });;
    });
</script>
